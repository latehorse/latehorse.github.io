function getBaseType(e){return Object.prototype.toString.apply(e).slice(8,-1)}function eachObj(e,t){for(var n in e)t(e[n],n,e)}function getKeys(e,t){var n=[];return eachObj(e,function(e,t){n.push(t)}),n.sort(t)}function extend(n,e){return eachObj(e,function(e,t){n[t]=e}),n}function getPosition(e){var t=0,n=0;if(!e.tagName)return console.warn("element must be a HTML element object"),{x:null,y:null};for(;e!==document.body;)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{x:t,y:n}}function disableLoad(){var e=document.getElementById("page");document.getElementById("page-loading").classList.add("js-hidden"),e.classList.remove("js-hidden")}!function(e){function t(e){this.ele=e,this.record=[],this.index=0,this.dir=1,this.status=!1}t.prototype={_toggleClass:function(e,t){var n=this;classArr=e.split(" "),classArr.forEach(function(e){n.ele.classList.toggle(e)}),t&&setTimeout(t,10)},_transfromClass:function(e,n){var i=this;this.ele.addEventListener("transitionend",function e(t){i.ele===t.target&&(n(),i.ele.removeEventListener("transitionend",e))}),this._toggleClass(e)},_animationClass:function(e,n){var i=this;this.ele.addEventListener("animationend",function e(t){i.ele===t.target&&(n(),i.ele.removeEventListener("animationend",e))}),this._toggleClass(e)},_toggle:function(){var e=this.record[this.index];if(this.index===this.record.length||-1===this.index)return this.end&&this.end(),this.index=0<this.dir?this.index-1:0,this.dir*=-1,void(this.status=!1);switch(e.type){case"class":this._toggleClass(e.className,this._toggle.bind(this));break;case"transfrom":this._transfromClass(e.className,this._toggle.bind(this));break;case"animation":this._animationClass(e.className,this._toggle.bind(this))}this.index+=this.dir},base:function(e){return this.record.push({className:e||"js-open",type:"class"}),this},transfrom:function(e){return this.record.push({className:e,type:"transfrom"}),this},animation:function(e){return this.record.push({className:e,type:"animation"}),this},toggle:function(){this.status||(0!==this.index&&this.index!==this.record.length-1||(this.status=!0),this._toggle())},lastStart:function(){var t=this;return this.status=!1,this.index=this.record.length-1,this.dir=-1,this.record.forEach(function(e){t.ele.classList.add(e.className)}),this},end:function(e){return this.end=e,this}},e.Pack=t}(window),function(e){function t(){this.record=[],this.timeoutMap={},this.listeners={start:[],frame:[],end:[]},this.frames=0,this._init()}t.prototype={_init:function(){return this.index=0,this.nowIndex=0,this.timer=null,this.time=0,this.startTime=null,this.record.forEach(function(n){eachObj(n,function(e,t){~t.indexOf("_")||(n[t].now=n[t].from)})}),this},_getSpendTime:function(){var e=this.time,i=this.nowIndex;return e-this.record.reduce(function(e,t,n){return n<i&&(e+=t._time),e},0)},_request:function(e){var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;return this.timer=t(e),this},_cancel:function(){return(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame)(this.timer),this},_algorithm:function(e){var t,n,i,s,o,a=e.type||"linear",r=e.time||1e3,c=e.now,d=e.aims||0,u=e.spendTime||0;switch(a){case"linear":return n=(t={time:r,now:c,aims:d,spendTime:u}).time,o=(i=t.now)+60*((s=t.aims)-i)/(n-t.spendTime),0<s-i?s<=o?s:o:o<=s?s:o}},_emit:function(e,t){return this.listeners[e]&&this.listeners[e].forEach(function(e){e(t)}),this},on:function(e,t){return~getKeys(this.listeners).indexOf(e)&&t&&this.listeners[e].push(t),this},from:function(e){e=e||{};var n=this.record[this.index]||{};return eachObj(e,function(e,t){n[t]={from:e,now:e,to:0}}),this.record[this.index]=n,this},to:function(e){e=e||{};var n=this.record[this.index]||{};return eachObj(e,function(e,t){n[t]=extend(n[t]||{from:0,now:0},{to:e})}),this.record[this.index]=n,this},transition:function(e){var t,n;"string"==typeof e?n=e:(t=e.type||"linear",n=e.time||1e3);var i=this.record[this.index]||{};return extend(i,{_time:n,_type:t}),this.record[this.index]=i,this},next:function(){return this.index=this.record.length,this},timeout:function(e){if(e&&"number"==typeof e){var t=0===this.record.length?-1:this.index;this.timeoutMap[t]=null!=this.timeoutMap[t]?this.timeoutMap[t]+e:e}return this},start:function(){var n=this.record,o=this;return this.next()._emit("start")._request(function e(){var i=n[o.nowIndex],s={};if(!o.startTime&&o.timeoutMap[-1])return o.startTime=(new Date).getTime(),o.pause(),void setTimeout(function(){o._request(e)},o.timeoutMap[-1]);if(o.time===i._time){var t=o.timeoutMap[o.nowIndex];if(o.time=0,o.nowIndex++,t)return o.pause(),void setTimeout(function(){o._request(e)},t);i=n[o.nowIndex]}o.nowIndex!==n.length?(eachObj(i,function(e,t){if(!~t.indexOf("_")){var n=o._algorithm({type:i._type,time:i._time,now:e.now,aims:e.to,spendTime:o.time});s[t]=n,(i[t].now=n)===e.to&&(o.time=i._time)}}),o.time!=i._time&&(o.time+=60),o._emit("frame",s),o.frames++,o._request(e)):o._emit("end").close()})},pause:function(){return this._cancel()},close:function(){return this._cancel()._init()}},e.Amt=t}(window),document.onreadystatechange=function(){var e=document.getElementById("page");"interactive"==document.readyState&&window.setTimeout(function(){disableLoad()},4e3),"complete"==document.readyState&&e.classList.contains("js-hidden")&&disableLoad()},window.addEventListener("load",function(){var t;(t=document.getElementById("page-header"))&&document.addEventListener("scroll",function(){var e=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;t.classList[30<e?"add":"remove"]("page__header--small")}),function(){var e=document.querySelector("button.page__menu-btn"),t=document.querySelector("nav.page__nav");if(e&&t){var n=new Pack(t);n.base("js-open").transfrom("page__nav--open"),e.addEventListener("click",function(){n.toggle()})}}(),function(){var e=document.getElementById("page-header");if(e){var t=e.querySelector(".info__title"),n=e.querySelector(".info__desc");t&&new Pack(t).animation("js-animation").end(function(){["js-animation"].forEach(function(e){t.classList.remove(e)})}).toggle(),n&&new Pack(n).base("js-ease-out-leave-active").base("js-ease-out-leave").transfrom("js-ease-out-enter-active").end(function(){["js-ease-out-enter","js-ease-out-enter-active","js-ease-out-leave","js-ease-out-leave-active"].forEach(function(e){n.classList.remove(e)})}).toggle()}}()}),window.addEventListener("load",function(){!function(){var n=document.getElementById("back-top"),i=new Pack(n);if(n){function e(){var e=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,t=n.classList.contains("back-top--hidden")&&n.classList.contains("js-hidden");(350<e&&t||e<350&&!t)&&i.toggle()}i.transfrom("back-top--hidden").base("js-hidden").lastStart(),e(),document.addEventListener("scroll",e),n.addEventListener("click",function(){(new Amt).from({top:window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop}).to({top:0}).transition(1e3).on("frame",function(e){window.scrollTo(0,e.top)}).start()})}}()}),window.addEventListener("load",function(){window._skappPostAnimation=function(){document.querySelectorAll("article.page__mini-article").forEach(function(t){if(!t.parentElement.parentElement.classList.contains("js-hidden")){var n=getPosition(t),i=new Pack(t);i.base("js-ease-out-leave-active").base("js-ease-out-leave").transfrom("js-ease-out-enter-active").end(function(){["js-ease-out-enter","js-ease-out-enter-active","js-ease-out-leave","js-ease-out-leave-active"].forEach(function(e){t.classList.remove(e)})}),function(e){var t=null,n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,i=window.cancelAnimationFrame||window.mozCancelAnimationFrame;function s(){i(t),t=n(e.bind(null,function(){document.removeEventListener("scroll",s)}))}document.addEventListener("scroll",s),s()}(function(e){n.y-window.scrollY-document.documentElement.clientHeight<50&&(e(),i.toggle())})}})},window._skappPostAnimation()});